### 更新日志 <!-- {docsify-ignore} -->

#### 下一个版本计划
  - 停止更新公告
    + 因日服会战变动，项目整体重构中，预计花费时间较长，在此期间不会 添加 | 维护 任何 新功能 | bug
    + 开发画面仅供参考，还请以实际效果为主
    + pc 端 web 后台暂时咕了，重心转移到小程序开发 ~~qq 机器人不用 qq 小程序用什么~~

  ![咕咕咕](../public/images/demo/dev.png)

> とある咕咕の更新日志

#### 0.6.1 (2021.07.06)
- new
  + 新增 bot 服务的关闭与重启
  + 新增 bot 相关指令（现在，你可以通过指令来自由添加和管理账号）
  + 更新词条以及表情包
- improved
  + 优化监听插件的线程处理
  + 插件部分移除 ts 支持，统一采用 js
  + 精简代码，优化性能，整合目录
  + 优化群问答插件，重写部分逻辑
  + 优化插件管理的相关提示
- fixed
  + 纠正会战 boss 相关血量错误数据
  + 修复台服会战 boss 无法进入 5 阶段的问题
  + 修复在线搜索色图未找到 tag 发送本地色图失败的问题
  + 修复 bilibili 动态监听服务变量污染的问题
  + 修复申请头衔没有提示的问题（框架移除了相关事件）
  + 修复加入新群配置文件不会更新的问题

#### 0.6.0 (2021.06.26)
- new
  + 初步完成 ts 重构
  + 更新 README 图标及相关描述 ~~我觉得这很 coooool~~
  + 数据库优化
  + 合并部分插件
  + 新增 qq 多账号支持
  + 现在，网络服务将独立于插件运行
  + 现在，每个插件将独立监听运行（此前为主进程单监听动态加载匹配）
  + 新增插件锁定
- improved
  + 会战模块优化，日服与国台服面板分离
  + 暂时移除登录窗口
  + 会战暂时移除改刀和挂树功能
  + 会战新增撤销报刀
  + 会战分数线 排名查询 恢复正常使用
  + 会战新增取消预约
- fixed
  + 修复国台服会战预约不会 at 成员的问题
  + 修复会战时区的错误
  + 修复数据库外键子句失效的问题
  + 修复部分位置 sendGroupMsg 指针丢失的问题
  + 修复群自定义词库发送图片导致数据库崩溃的问题

</br>

#### 0.5.9 (2021.06.12)
- new 
  + 更新 yumemi 原创头像
  + 在线搜索色图若未找到相关 tag 将发送本地图片
- improved
  + 修复 rank 表部分场景图片发送失败的问题

#### 0.5.8 (2021.06.10)
- new 
  + 添加你问我答模块
  + 更新数据库字段表及头像信息
  + 更新猜头像，优化图片处理及稳定性
- improved
  + 拆分 sql 语句
  + 优化插件加载逻辑
  + 移除部分参数热更新处理
  + 更新 web 部分 api 参数
- fixed
  + 修复 setu 错误显示涩图库存的问题
  + 修复 bilibili 动态部分字段丢失的问题
  + 修复 saucenao 搜索本子英日文本错位的问题

#### 0.5.7 (2021.05.18)
- new
  + ~~一天更新两个版本，不愧是我~~
  + 新增猜头像 beta ~~未经过高强度测试，不保证稳定性~~
  + 数据库字段更新，添加角色昵称表

- improved
  + 更新 webhook ，现在只监听 master 分支推送
- fixed
  + 修复 hitokoto 偶尔 404 没有任何反馈的问题

#### 0.5.6 (2021.05.18)
- new
  + 关于我不小心更新太多被迫跨版本号这档事
  + 重写 bot create 实例，可实现多账号管理
  + 项目整体重构，移除所有 plugin 的 class
  + 更新涩图模块，优化 http 图片处理，由 binary 变更为 base64
  + 更新买药模块，新增游戏服务器时区切换
  + 更新 chat 词库与戳一戳交互
  + 更新五子棋模块，新增投降、悔棋
  + 更新网抑云模块，新增主动触发
  + 更新搜图模块，格式化搜索字段
  + 更新 bilibili 模块，优化动态监听处理逻辑，修复无法发送专栏动态的 bug
  + 更新会战模块，日服会战兼容
  + 更新权限管理，新增等级制度，会根据群成员的活跃度自动分配等级
  + 更新申请头衔模块，新增等级限制
- improved
  + 优化 rank 表发送逻辑，解决偶尔无法发送图片的问题
  + 优化群事件处理逻辑
  + 优化 sql 语句，分离 api 请求
  + 项目结构变更，tools 分离至 utils
  + 优化配置文件逻辑，在 bot 成功登录时自动完成校验
  + 优化插件加载逻辑，新增插件异常处理
  + 优化修改配置文件的语法糖逻辑
  + 数据库重构，整合并移除本地 unit 文件
  + 重写 http https 处理函数，新增 method 处理
  + 修复 bug 若干，增加稳定性，移除冗余代码
- add bug
  + 因兼容日服会战，现预约 boss，暂时无法主动 at 成员
  + 因数据库结构变动较大，逻辑全部重写，会战挂树相关暂时移除

</br>

#### 0.5.2 (2021.04.12)
- improved
  + 优化稳定性
  + 优化 api.yml 结构
  + 优化 cmd.yml 正则语句
  + 现在 saucenao 模块将默认关闭
- fixed
  + 修复 hitokoto 因错误参数导致的异常

#### 0.5.1 (2021.04.09)
- new
  + 重构会战模块
  + 重构动态监听
- improved
  + 修改数据库部分字段
- fixed
  + 发现了一个在仓库创建初期上传的敏感信息，将所有 commit 信息回滚

#### 0.5.0 (2021.03.29)
- new
  + 五子棋添加悔棋功能
  + 现在添加新插件将自动更新群 yml
- improved
  + 优化 hitokoto 代码逻辑
  + 仓库名变更为 yumemi_bot ~~package.json 老是提示我语法错误，强迫症害死人~~
  + 现在 bilibili 监听默认关闭
- fixed
  + 修复动态监听偶尔抛 error 的问题

</br>

#### 0.4.5 (2021.03.24)
- update
  + 重构涩图模块
- improved
  + 移除 acgmx api 的支持 ~~acgmx 发的图都太涩了~~
- fixed
  + 解决 webhook 排版错误的问题 ~~这也算 bug ？~~

#### 0.4.4 (2021.03.23)
- new
  + 添加每日一言 ~~生不出人我很抱歉~~
  + 添加 groups 群聊数据自动校验
  + 添加 bot 自动同意加群及好友申请
- improved
  + 优化项目逻辑
  + 优化 command.yml 结构
- fixed
  + 移除 mirai-ts 时期的废弃代码
  + 修复 plugin 目录下不存在 index.js 抛出异常的问题

#### 0.4.3 (2021.03.20)
- new
  + 添加图片搜索
  + 优化权限管理
- improved
  + web 部分变量分离至 bot.yml

#### 0.4.2 (2021.03.16)
- new
  + 添加聊天模块
  + 添加戳一戳互动
- improved
  + 封印防撤回功能 ~~这玩意太阴间了，要尊重别人的隐私~~

#### 0.4.1 (2021.03.13)
- improved
  - 会战优化数据修改逻辑
  - 会战优化预约查询逻辑
- fixed
  + 修复因跨日刀导致会战数据异常的问题
  + 修复会战数据自动回滚的问题

#### 0.4.0 (2021.03.10)
- new
  + 会战添加挂树功能
  + 会战添加查树功能
  + 会战添加代报功能
  + 会战添加中止会战功能
- improved
  + 项目初步完成整体重构
  + 数据库整体重构，SQL 重写
  + yml 配置文件结构优化
  + 优化 tools 方法类
  + express 框架更换为 koa
- fixed
  + 修复 web 页面偶尔登录异常的问题
  + 修复 bilibili 监听异常的问题
  + 修复 http 请求超时无响应的问题

</br>

#### 0.3.6 (2021.03.03)
- new
  + 添加 bilibili 动态监听模块
  + 添加五子棋模块
  + 会战模块添加国服公会排名查询
- fixed
  + 代码性能优化 & 数据修正
  + 修复加入新群聊 pluginSettings 丢失的问题

#### 0.3.5 (2021.02.08)
- new
  + 色图新增本地存储图片，优化发送速度
  + 色图新增多 api 支持（acgmx、lolicon）
  + 色图增加每日色图获取上限及小黑屋功能
- improved
  + 优化插件加载逻辑
  + 优化 buy 多余的 for 循环操作
  + 移除 plugin 必须传入 settings 对象的约束
- fixed
  + 修复 lolicon api 301 跳转的错误

#### 0.3.4 (2021.01.22)
- improved
  + 优化数据库结构
  + 优化 sql 函数，简化大量重复调用

#### 0.3.3 (2021.01.18)
- new
  + 添加 GitHub webhook 推送

#### 0.3.2 (2021.01.16)
- new
  + 添加 web 后台青春版
- fixed
  + 修复了 reservations.yml 生成异常的错误
  
#### 0.3.1 (2021.01.09)
- new
  + 添加 SQLite 初步完成会战重构 ~~MongoDB：所以爱是会消失的对么？~~
- improved
  + 项目仓库开源
- fixed
  + 修复会战因异步导致数值异常的问题

#### 0.3.0 (2021.01.01)
- new
  + 新增 yml 配置文件自动生成与校验
- improved
  + 项目结构大大大改 ~~别改了别改了~~
  + 优化 qq 登录校验，设备锁、验证码监听
  + 优化模块引入逻辑，现在将自动加载无需手动引入

</br>

#### 0.2.6 (2020.12.15)
- improved
  + 优化权限管理逻辑

#### 0.2.5 (2020.11.26)
- new
  +  添加模块参数修改
- improved
  + 简化项目结构，移除 mirai-ts 时期的废弃代码

#### 0.2.4 (2020.11.11)
- improved
  + 优化代码逻辑
  + 支持参数热更新（修改参数后无需重启 bot）

#### 0.2.3 (2020.10.31)
- new
  + 添加群管提示（欢迎新人、关小黑屋、塞口球...等）
- fixed
  + 修复 schedule 鬼畜触发的 bug

#### 0.2.2 (2020.10.30)
- new
  + 添加多群权限管理
  + 添加 rank 一图流查询
  + 添加群内头衔申请
- improved
  + 买药小助手支持图片发送

#### 0.2.1 (2020.10.21)
- fixed
  + 修复了 lolicon 请求 301 跳转的报错

#### 0.2.0 (2020.10.19)
- improved
  + 框架由 mirai-ts 移植至 oicq ~~你他喵的有完没完啊 kora~~

</br>

#### 0.1.8 (2020.10.02)
- improved
  + 更新扭蛋模块，支持图片发送，支持日、台服卡池切换 ~~代码写好了但是卡池数据没录 2333~~

#### 0.1.7 (2020.09.29)
- improved
  + 更新色图模块，添加 tag 搜索，支持闪图发送， ~~求生欲极强~~

#### 0.1.6 (2020.09.21)
- improved
  + 重构买药助手，暂不支持图片发送

#### 0.1.5 (2020.09.15)
- improved
  + 重构会战报刀，添加预约功能

#### 0.1.4 (2020.08.29)
- improved
  + 项目结构调整
  + 添加 YAML 配置文件
  + 代码性能优化
  + 将仓库由 Github 迁移至 Gitee 以便提升国内访问速度 ~~广电是我永远的噩梦~~
- fixed
  + 修复加入多个群聊未响应的问题 ~~话说真的需要做多群管理么，反正也没外人用~~

#### 0.1.3 (2020.08.28)
- new
  + 添加会战模块，目前进支持报刀，数据存储在 JSON 中，日后会逐渐完善 ~~能用 JSON 干嘛要用 BD~~

#### 0.1.2 (2020.08.24)
- improved
  + 重构色图模块，暂不支持图片发送

#### 0.1.1 (2020.08.18)
- improved
  + 重构扭蛋模块，暂不支持图片发送

#### 0.1.0 (2020.08.14)
- improved
  + ~~框架都换了跨个版本号不过分吧~~
  + koishi v2 的 doc 老咕咕咕了，更新后 config 结构都变了，项目都跑不起来，坑太多了 ~~我太菜了，面向源码编程~~ ，移植至 mirai-ts

</br>

#### 0.0.5 (2020.08.13)
- new
  + 添加扭蛋十连，目前只有文字模式

#### 0.0.4 (2020.08.10)
- improved
  + 重构项目逻辑，优化代码性能
  + 因 pcrdfans key 被回收，移除写到一半的 jjc 代码

#### 0.0.3 (2020.07.29)
- new
  + 添加买药助手，暂不支持图片发送

#### 0.0.2 (2020.07.28)
- new
  + 添加色图模块，目前只能发链接，暂不支持图片发送 ~~ghs 才是第一生产力~~

#### 0.0.1 (2020.07.26)
- improved
  + 原项目名为 kokkoro ，基于 nonebot ，现从零开始移植至 koishi ~~js是世界上最好的语言~~